# Architecture Decision Records (ADR)

Документация архитектурных решений проекта NLMKblablaCAR.

## Что такое ADR?

ADR (Architecture Decision Record) — это документ, фиксирующий важное архитектурное решение вместе с контекстом и последствиями.

## Формат ADR

Каждый ADR содержит:
- **Статус**: Принято / Отклонено / Заменено / Устарело
- **Контекст**: Почему возникла необходимость в решении
- **Решение**: Что было решено
- **Альтернативы**: Какие варианты рассматривались
- **Последствия**: Положительные и отрицательные эффекты

## Индекс ADR

### Высокий приоритет

| # | Название | Статус | Описание |
|---|----------|--------|----------|
| [ADR-001](ADR-001-frontend-backend-separation.md) | Разделение Frontend/Backend | Принято | Архитектура с SPA + REST API |
| [ADR-005](ADR-005-jwt-authentication.md) | JWT-аутентификация | Принято | Stateless токены для авторизации |
| [ADR-006](ADR-006-passwordless-auth.md) | Упрощенная авторизация | Принято (MVP) | Авто-регистрация без пароля |
| [ADR-010](ADR-010-monolithic-app-component.md) | Монолитный App.tsx | Принято | Единый файл для всех экранов |
| [ADR-017](ADR-017-soft-delete.md) | Soft Delete | Принято | Архивация вместо удаления |

### Средний приоритет

| # | Название | Статус | Описание |
|---|----------|--------|----------|
| [ADR-003](ADR-003-prisma-orm.md) | Prisma ORM | Принято | Type-safe работа с PostgreSQL |
| [ADR-011](ADR-011-react-context-state.md) | React Context | Принято | State management без Redux |
| [ADR-018](ADR-018-yandex-maps.md) | Yandex Maps | Принято | Карты и геолокация |
| [ADR-019](ADR-019-gemini-ai-assistant.md) | Gemini AI | Принято | LLM-ассистент |
| [ADR-027](ADR-027-restful-api.md) | RESTful API | Принято | Дизайн HTTP API |

## Технический долг (по ADR)

### Критичный

- [ ] **ADR-006**: Реализовать Magic Link до публичного релиза
- [ ] **ADR-019**: Перенести Gemini API key на backend

### Высокий приоритет

- [ ] **ADR-010**: Разбить App.tsx на отдельные компоненты
- [ ] **ADR-005**: Добавить refresh token механизм
- [ ] **ADR-005**: Реализовать rate limiting

### Средний приоритет

- [ ] **ADR-011**: Разделить контексты (Auth, Trips, Bookings)
- [ ] **ADR-017**: Добавить индексы для поля status
- [ ] **ADR-018**: Добавить кэширование suggest запросов
- [ ] **ADR-027**: Создать OpenAPI документацию

## Связи между ADR

```
ADR-001 (Frontend/Backend)
    │
    ├──► ADR-005 (JWT) ──► ADR-006 (Passwordless)
    │         │
    │         └──► ADR-007 (localStorage) [не создан]
    │
    ├──► ADR-027 (REST API)
    │         │
    │         └──► ADR-016 (Zod) [не создан]
    │
    └──► ADR-003 (Prisma) ──► ADR-017 (Soft Delete)

ADR-010 (Monolithic App)
    │
    └──► ADR-011 (React Context)

ADR-018 (Yandex Maps)
    │
    └──► ADR-019 (Gemini AI)
```

## Как добавить новый ADR

1. Создайте файл `ADR-XXX-short-name.md`
2. Используйте шаблон из существующих ADR
3. Добавьте запись в этот README
4. Укажите связи с другими ADR

## Статусы ADR

- **Принято** — решение принято и реализовано
- **Принято (MVP)** — временное решение для MVP, требует пересмотра
- **Отклонено** — решение рассмотрено, но не принято
- **Заменено** — заменено другим ADR
- **Устарело** — больше не актуально
