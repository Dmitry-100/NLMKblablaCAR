# ADR-001: Разделение Frontend и Backend

**Статус:** Принято
**Дата:** 2024-01
**Автор:** Команда разработки

## Контекст

Необходимо выбрать архитектурный подход для веб-приложения корпоративного карпулинга NLMKblablaCAR. Приложение должно обеспечивать:
- Работу на мобильных устройствах и десктопах
- Интеграцию с внешними сервисами (карты, AI)
- Возможность независимого масштабирования компонентов
- Простоту развертывания и обновления

## Решение

Выбрана архитектура с разделением на:
- **Frontend**: React SPA, развернутый на Netlify (статический хостинг с CDN)
- **Backend**: Express.js REST API, развернутый на Render (Node.js сервис)

```
┌─────────────────┐     HTTPS/JSON      ┌─────────────────┐
│   Frontend      │ ◄─────────────────► │   Backend       │
│   (Netlify)     │                     │   (Render)      │
│                 │                     │                 │
│   React SPA     │                     │   Express.js    │
│   Vite          │                     │   Prisma ORM    │
│   Tailwind      │                     │   PostgreSQL    │
└─────────────────┘                     └─────────────────┘
```

## Альтернативы

### 1. Монолитное приложение (SSR)
- **Технологии**: Next.js, Nuxt.js
- **Плюсы**: Единая кодовая база, SSR для SEO, проще деплой
- **Минусы**: Сложнее масштабировать отдельно, привязка к фреймворку

### 2. Serverless Functions
- **Технологии**: Vercel Functions, Netlify Functions, AWS Lambda
- **Плюсы**: Автомасштабирование, оплата за использование
- **Минусы**: Cold start, ограничения по времени выполнения, сложнее отладка

### 3. Full-stack фреймворк
- **Технологии**: Remix, Blitz.js
- **Плюсы**: Интегрированный DX, типобезопасность end-to-end
- **Минусы**: Молодые технологии, меньше специалистов

## Последствия

### Положительные
- **Независимое развертывание**: Frontend и Backend обновляются отдельно
- **Оптимальный хостинг**: Frontend на CDN (быстрая доставка), Backend на managed Node.js
- **Разделение команд**: Возможность параллельной разработки
- **Бесплатный tier**: Netlify + Render предоставляют бесплатные тарифы для MVP
- **Технологическая гибкость**: Можно заменить любую часть независимо

### Отрицательные
- **CORS**: Необходимо настраивать cross-origin запросы
- **Два репозитория/деплоя**: Усложняет CI/CD (решено монорепо структурой)
- **Нет SSR**: Хуже SEO (не критично для корпоративного приложения)
- **Latency**: Дополнительный network hop между frontend и backend
- **Синхронизация типов**: Нужно поддерживать типы в двух местах

## Связанные решения

- ADR-004: Выбор Render + Netlify для хостинга
- ADR-027: RESTful API дизайн
